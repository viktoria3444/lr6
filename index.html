<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Promise API — Лабораторна</title>
  <style>
    #loader {
      display: none;
      font-size: 22px;
      font-weight: bold;
      color: blue;
    }
    #result {
      margin-top: 20px;
      font-size: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

  <h1>Лабораторна — Promise API</h1>

  <!-- ЛОАДЕР (Завдання 0) -->
  <div id="loader">⏳ Завантаження...</div>

  <div id="result"></div>

  <h2>Завдання</h2>

  <button onclick="task1()">Завдання 1</button>
  <button onclick="task2()">Завдання 2</button>
  <button onclick="task3()">Завдання 3</button>
  <button onclick="task4()">Завдання 4</button>
  <button onclick="task5()">Завдання 5</button>

  <script>
    const loader = document.getElementById("loader");
    const result = document.getElementById("result");

    function showLoader() {
      loader.style.display = "block";
    }
    function hideLoader() {
      loader.style.display = "none";
    }

    // ========== ЗАВДАННЯ 1 ==========
    function task1() {
      showLoader();
      const promise = new Promise((resolve) => {
        setTimeout(() => resolve("Hello, World!"), 2000);
      });

      promise.then((msg) => {
        result.innerHTML = msg;
      }).catch((err) => {
        result.innerHTML = err;
      }).finally(hideLoader);
    }

    // ========== ЗАВДАННЯ 2 ==========
    function checkNumber(num) {
      return new Promise((resolve, reject) => {
        if (num > 10) {
          resolve("Число більше 10");
        } else {
          reject("Число менше або дорівнює 10");
        }
      });
    }

    function task2() {
      showLoader();
      checkNumber(prompt("Введіть число:"))
        .then((msg) => result.innerHTML = msg)
        .catch((err) => result.innerHTML = err)
        .finally(hideLoader);
    }

    // ========== ЗАВДАННЯ 3 ==========
    function randomNumber() {
      const time = Math.floor(Math.random() * 3000) + 1000;
      return new Promise((resolve) => {
        setTimeout(() => {
          resolve({
            number: Math.floor(Math.random() * 100) + 1,
            time
          });
        }, time);
      });
    }

    function task3() {
      showLoader();
      randomNumber()
        .then((data) => {
          result.innerHTML = `Випадкове число: ${data.number}<br>
                              Час виконання: ${data.time} мс`;
        })
        .finally(hideLoader);
    }

    // ========== ЗАВДАННЯ 4 ==========
    function compareNumbers(num1, num2) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          if (num1 > num2) resolve("Перше число більше");
          else if (num1 < num2) resolve("Друге число більше");
          else reject("Числа рівні");
        }, 1000);
      });
    }

    function task4() {
      const n1 = Number(prompt("Введіть перше число:"));
      const n2 = Number(prompt("Введіть друге число:"));

      showLoader();

      compareNumbers(n1, n2)
        .then((msg) => result.innerHTML = msg)
        .catch((err) => result.innerHTML = err)
        .finally(hideLoader);
    }

    // ========== ЗАВДАННЯ 5 ==========
    function task5() {
      showLoader();

      const promises = [
        new Promise((res) => setTimeout(() => res(Math.ceil(Math.random()*10)), 1000)),
        new Promise((res) => setTimeout(() => res(Math.ceil(Math.random()*10)), 2000)),
        new Promise((res) => setTimeout(() => res(Math.ceil(Math.random()*10)), 3000))
      ];

      Promise.all(promises)
        .then(values => {
          const sum = values.reduce((a,b)=>a+b);
          result.innerHTML =
            `Отримані числа: ${values.join(", ")}<br>Сума: ${sum}`;
        })
        .finally(hideLoader);
    }
  </script>

</body>
</html>
